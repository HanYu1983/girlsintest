<style>
.mc_container{
	position:relative;
	width:800px;
	left:50%;
	margin-left:-400px;
}
.mc_fakeloading{
	position:absolute;
	top:0;
	width:100%;
	height:100%;
	background-color:blue;
	font-size:50px;
}
.mc_head{
	width:800px;
	height:200px;
	margin-top:50px;
}
.mc_sliderContainer{
	width:800px;
	height:300px;
}
.mc_items{
	width:800px;
	height:600px;
}
.mc_iframeContainer{
	position:absolute;
	width:200px;
	height:200px;
}
.mc_iframeContainerA{
	left:50%;
	margin-left:-100px;
	margin-top:30px;
}
.mc_iframeContainerB{
	left:50px;
	margin-top:30px;
}
.mc_iframeContainerC{
	right:50px;
	margin-top:30px;
}
.mc_forOver{
	width:100%;
	height:100%;
	position:absolute;
}
.mc_cover{
	position:relative;
	margin-top:-200px;
	width:200px;
	height:200px;
	background-image:url( 'images/fakeModel.jpg' );
}
</style>
<div class='mc_container'>
	<div class='outline mc_head'>
	這裡是標題
	</div>
	<div class='outline mc_sliderContainer'>
	這裡是三個轉轉轉
		<div id='mc_forOver' class='mc_forOver'></div>
		<div class='outline mc_iframeContainer mc_iframeContainerA'>
			<iframe id='iframe_modelA' width='200px' height='200px'></iframe>
			<div id='mc_coverA' class='mc_cover'></div>
		</div>
		<div class='outline mc_iframeContainer mc_iframeContainerB'>
			<iframe id='iframe_modelB' width='200px' height='200px'></iframe>
			<div id='mc_coverB' class='mc_cover'></div>
		</div>
		<div class='outline mc_iframeContainer mc_iframeContainerC'>
			<iframe id='iframe_modelC' width='200px' height='200px'></iframe>
			<div id='mc_coverC' class='mc_cover'></div>
		</div>
	</div>
	<div class='outline mc_items'>
	這裡是舊資料
	</div>
</div>
<div id='mc_fakeloading' class='mc_fakeloading'>loading...</div>
<script>
window.view = window.view || {};
(function(){
	function v_streetSnapContent(){
		var iframe_modelA = $('#iframe_modelA' );
		var iframe_modelB = $('#iframe_modelB' );
		var iframe_modelC = $('#iframe_modelC' );
		var mc_coverA = $('#mc_coverA' );
		var mc_coverB = $('#mc_coverB' );
		var mc_coverC = $('#mc_coverC' );
		var mc_forOver = $('#mc_forOver' );
		var mc_loading = $('#mc_fakeloading' );
		return {
			getIframeASource:function( src ){
				return iframe_modelA;
			},
			getIframeBSource:function( src ){
				return iframe_modelB;
			},
			getIframeCSource:function( src ){
				return iframe_modelC;
			},
			getCoverA:function(){
				return mc_coverA;
			},
			getCoverB:function(){
				return mc_coverB;
			},
			getCoverC:function(){
				return mc_coverC;
			},
			getForOver:function(){
				return mc_forOver;
			},
			getLoading:function(){
				return mc_loading;
			}
		}
	}
	window.view.v_streetSnapContent = v_streetSnapContent;
})();

window.controller = window.controller || {};
(function(){
	
	function c_streetSnapContent(){
		//import sketchfab lib
		var sketchfabModule = window['sketchfab-iframe'];
		var Sketchfab = sketchfabModule.Sketchfab;
		var view = window.view.v_streetSnapContent();
		//local test
		var ary_urlids = [ 'bb79930ee30944378ec957dcc6bed42d', 'bb79930ee30944378ec957dcc6bed42d', 'bb79930ee30944378ec957dcc6bed42d' ];
		var ary_iframes = [
			view.getIframeASource(),
			view.getIframeBSource(),
			view.getIframeCSource()
		];
		var ary_cover = [
			view.getCoverA(),
			view.getCoverB(),
			view.getCoverC()
		];
		var ary_api = [];
		var mc_forOver = view.getForOver();
		var mc_loading = view.getLoading();
		var options = {
			autospin:.3,
			ui_controls:0,
			ui_infos:0,
			nocamera: 1,
			autostart: 0,
			transparent: 0,
			controls: 0,
			watermark:0,
			desc_button:0,
			stop_button:0
		};
		
		for( var i = 0; i < ary_urlids.length; ++i ){
			var api = new Sketchfab( ary_iframes[i][0] );
			sketchfabModule.Q.when( api.load( ary_urlids[i], options )).then( addListener ).fail( function( error ){
				alert( error );
			});
			ary_api.push( api );
		}
		
		var completeCount = 0;
		function addListener( data ){
			completeCount++;
			if( completeCount < 3 )	return;
			mc_loading.fadeOut( 500 );
			for( var i = 0; i < ary_cover.length; ++i ){
				ary_cover[i].mouseover( function(){
					var cover = $( this );
					var api;
					cover.fadeOut( 500 );
					switch( cover.attr( 'id' )){
						case 'mc_coverA':	api = ary_api[0];break;
						case 'mc_coverB':	api = ary_api[1];break;
						case 'mc_coverC':	api = ary_api[2];break;
					}
					api.start();
					mc_forOver.mouseover( function(){
						mc_forOver.off( 'mouseover' );
						for( var k in ary_cover )	ary_cover[k].fadeIn( 500 );
						api.stop();
					});
				});
			}
		}
	}
	window.controller.c_streetSnapContent = c_streetSnapContent;
})();
</script>
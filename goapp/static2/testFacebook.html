<html>
	<head>
		<script src='js/lib/vic.facebook.js'></script>
		<script src='js/lib/vic.google.api.js'></script>
		<script src='js/lib/jquery-1.7.2.js'></script>
		<script src="https://apis.google.com/js/client.js"></script>
        <script src='js/app.api.js'></script>
	</head>
	<body onload=init()>
		<button id='btn_login'>login</button>
        <button id='btn_logout'>logout</button>
        <div id='cookie'></div>
		<script>
			vic.facebook.init( '679171275511375', '', function(){
				console.log( 'd');
				
			});
            
        	var host = 'http://localhost:8080/'
        	var query = app.api.partial( app.api.query, host )
			
			$( '#btn_login' ).click( function(){
				vic.facebook.getMyData( function( res ){
					console.log( res );
                    var token = res.accessToken
	                $.when( query( app.api.Login,{fbtoken: token} ) )
		                .done( function(data){ 
                            $('#cookie').html(document.cookie)
                            console.log(data)
                         } )
		                .fail( function(err){ console.log(err) } )
				});
			});
            
			$( '#btn_logout' ).click( function(){
                console.log('perform logout')
                console.log('cookie:'+document.cookie)
	            $.when( query( app.api.Logout,{} ) )
		            .done( function(data){
                        $('#cookie').html(document.cookie)
                        console.log(data) 
                    } )
		            .fail( function(err){ console.log(err) } )
			});
		
			function init(){
				console.log( "DDD");
				vic.google.api.init( {
					clientId:'10759862730-em9hs1v10pblook5po2o8uc01t0ttaub.apps.googleusercontent.com',
					apiKey:'AIzaSyDaq6jjkKtehEDJaa2CRZFrLR6T752NZDM',
					scopes:'',
					onApiReady:function(){
						console.log( 'onApiReady' );
					},
					onNoLogin:function(){
						console.log( 'onNoLogin' );
					}
				});	
			}
		</script>
	</body>
</html>
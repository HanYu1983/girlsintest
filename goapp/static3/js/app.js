// Generated by CoffeeScript 1.8.0
(function() {
  window.app.Main = (function() {
    function Main() {
      var self;
      this.coll_tmpls = {
        home: $('#tmpl_home'),
        celebrity: $('#tmpl_celebrity'),
        models: $('#tmpl_models'),
        event: $('#tmpl_event'),
        streetsnap: $('#tmpl_streetsnap'),
        streetsnapList: $('#tmpl_streetsnap_list'),
        news: $('#tmpl_news')
      };
      this.coll_pages = {};
      this.mc_pageContainer = $('#mc_pageContainer');
      self = this;
      this.header = new window.app.header.Controller(new window.app.header.View($('#mc_header')));
      this.header.open();
      this.header.event.on('onHeaderBtnBackhomeClick', function() {
        return self.openHome();
      });
      this.menubar = new window.app.menubar.Controller(new window.app.menubar.View($('#mc_menubar')));
      this.menubar.open();
      this.menubar.event.on('onMenubarBtnClick', function(e, id) {
        switch (id) {
          case 'btn_nav_celebrity':
            return self.openCelebrity();
          case 'btn_nav_model':
            return self.openModels();
          case 'btn_nav_event':
            return self.openEvent();
          case 'btn_nav_streetSnap':
            return self.openStreetsnap();
          case 'btn_nav_news':
            return self.openNews();
        }
      });
      this.openHome();
    }

    Main.prototype.openHome = function() {
      return this.openTargetPage('home');
    };

    Main.prototype.openCelebrity = function() {
      return this.openTargetPage('celebrity');
    };

    Main.prototype.openModels = function() {
      return this.openTargetPage('models');
    };

    Main.prototype.openEvent = function() {
      return this.openTargetPage('event');
    };

    Main.prototype.openStreetsnap = function() {
      return this.openTargetPage('streetsnap');
    };

    Main.prototype.openStreetsnapList = function() {
      return this.openTargetPage('streetsnapList');
    };

    Main.prototype.openNews = function() {
      return this.openTargetPage('news');
    };

    Main.prototype.openTargetPage = function(name, model) {
      var controller, elem, self;
      self = this;
      elem = this.coll_tmpls[name].tmpl(model);
      elem.appendTo(this.mc_pageContainer);
      controller = new window.app[name].Controller(new window.app[name].View(elem));
      controller.open();
      return this.collect_page[name] = controller;
    };

    Main.prototype.closeTargetPage = function(name) {
      var page;
      if (this.collect_page[name] === void 0) {
        return;
      }
      page = this.collect_page[name];
      this.mc_pageContainer.empty();
      this.collect_page[name].close();
      delete this.collect_page[name];
      return page;
    };

    Main.prototype.closeAllPageAndThen = function(func) {
      return func();
    };

    return Main;

  })();

  new window.app.Main();

}).call(this);
